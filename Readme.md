# ü•≠ Mango

Simple, modern, opinionated Web Server in Golang.

Focus on building web services, we take care of the dev tools.

!! **WIP** Under construction, use at your own risk üò∏ !!

## Features

- ‚ùÑÔ∏è Unified commands (**Mango CLI**) and configuration (`.mango.yaml`)
- ‚è≥ Mango is pure development tools, zero runtime overhead
- ‚õÑ Multi Usage Web Server (pick the part you need):
  - API Endpoints based on [Connect](https://connectrpc.com/) (Support GRPC, Restful, OpenAPI, Swagger, ...)
  - Database Access based on [SQLC](https://github.com/sqlc-dev/sqlc) (Support sqlite, postgres, mysql)
  - Support static content (Markdown)
  - Support dynamic HTML content with [Templ](https://github.com/a-h/templ)/[Htmx](https://htmx.org/)
  - Modern UI based on [Tailwind](https://tailwindcss.com/) / [DaisyUI](https://daisyui.com/)
- ‚ú® Smooth Dev Experience:
  - Live-Reload with [Air](https://github.com/cosmtrek/air)
  - Reproducible Dev Environment based on [Devenv](https://devenv.sh/) (Nix + Devcontainer)
  - Standard Code Style from [Golangci-lint](https://github.com/golangci/golangci-lint), [Prettier](https://prettier.io/)
- üéñ Code generation to reduce boilerplate:
  - Network queries based on Protobuf (**Schema First**)
  - SQL data structure autogenerated from SQL queries (**SQL Schema First**)
  - [Templ](https://github.com/a-h/templ) to generate HTML code (**HTML First**)

## Getting Started

### Step 1. Setup Environment

- [Install Devenv (nix)](https://devenv.sh/getting-started/)
- Open a development shell

```sh
devenv shell # not required if you use direnv
```

### Step 2. Use the Mango CLI

- `mango create`: Bootstrap new app
- `mango dev`: Start the server in development mode
- `mango build`: Create Binaries in `./dist` (Multi-platform)
- `mango lint`: Run Linting (Golangci-lint, Sqlc vet, ...)
- `mango generate`: Run all the code generators

## App Folder Structure

- `<app>/api`: API Schema + Handlers
- `<app>/assets`: Static Assets (image, css, js)
- `<app>/codegen`: Auto-generated code (DB, Networking, Mocks, ...)
- `<app>/contents`: Static Contents (markdown)
- `<app>/db`: SQL Schema for [SQLC](https://github.com/sqlc-dev/sqlc) (`.sql`)
- `<app>/tools`: 3rd party tooling (Tailwind, ...)
- `<app>/views`: HTMLTemplating
- `<app>/routes.go`: HTTP Router
- `<app>/main.go`: Server Creation

## TODO Progress

- CLI
  - [ ] Bootstrap templates
  - [x] Better CLI logging
- Project
  - [x] Web UI (HTMX/Templ)
  - [x] Handle assets/public folder
  - [ ] Background Task (queue)
  - [ ] Doc generation
  - [ ] Tests / 2e2
- Dev Tool
  - [x] Support Nix/Devenv
  - [x] Support .env
  - [x] Build
  - [ ] Docker compose integration
  - [ ] DB Migration Tools
  - [ ] Infra dev tools (graphana)
- Infra
  - [ ] Deploy & Document (auto build docker images / binaries) for (Self-hosted, Heroku, Fly.io, GCP, ...)
